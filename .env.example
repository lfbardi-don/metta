# ===========================================
# SERVER CONFIGURATION
# ===========================================
PORT=3000
NODE_ENV=development

# ===========================================
# WORKER CONFIGURATION
# ===========================================
# Enable/disable worker (set to false to disable SQS processing)
WORKER_ENABLED=true

# Graceful shutdown timeout (milliseconds)
GRACEFUL_SHUTDOWN_TIMEOUT=30000

# ===========================================
# OPENAI API CONFIGURATION
# ===========================================
OPENAI_API_KEY=your_openai_api_key_here

# ===========================================
# DATABASE CONFIGURATION (Neon PostgreSQL)
# ===========================================
# Get this from: https://console.neon.tech/
DATABASE_URL=postgresql://user:password@host/database?sslmode=require

# ===========================================
# AWS SQS CONFIGURATION
# ===========================================
AWS_REGION=us-east-1
AWS_ACCESS_KEY_ID=your_aws_access_key_id
AWS_SECRET_ACCESS_KEY=your_aws_secret_access_key
SQS_QUEUE_URL=https://sqs.us-east-1.amazonaws.com/123456789/your-queue-name

# SQS Polling Configuration
SQS_MAX_MESSAGES=10           # Max messages per poll (1-10)
SQS_WAIT_TIME_SECONDS=20      # Long polling duration (0-20)
SQS_VISIBILITY_TIMEOUT=30     # Processing timeout before retry (seconds)
SQS_MAX_RETRIES=3             # Max retry attempts

# ===========================================
# CHATWOOT CONFIGURATION
# ===========================================
# API Configuration (for sending messages)
CHATWOOT_API_URL=https://app.chatwoot.com
CHATWOOT_API_KEY=your_chatwoot_api_key
CHATWOOT_ACCOUNT_ID=your_account_id

# Note: Webhooks are received by AWS Lambda, not this worker
# This worker only SENDS messages to Chatwoot

# ===========================================
# ODOO CONFIGURATION
# ===========================================
ODOO_URL=https://your-company.odoo.com
ODOO_DATABASE=your_database_name
ODOO_USERNAME=your_odoo_username
ODOO_PASSWORD=your_odoo_password

# Optional: API Key (if using API key authentication instead)
# ODOO_API_KEY=your_odoo_api_key

# ===========================================
# GUARDRAILS CONFIGURATION
# ===========================================
# Enable/disable specific guardrails
GUARDRAILS_ENABLE_PII_CHECK=true
GUARDRAILS_ENABLE_TOXICITY_CHECK=true
GUARDRAILS_ENABLE_INJECTION_CHECK=true
GUARDRAILS_ENABLE_BUSINESS_RULES=true

# PII Detection with Metadata Extraction
# When enabled, PII (email, phone, DNI, credit cards, SSN) is detected and:
# - Replaced with indexed placeholders in conversation ([EMAIL_1], [DNI_1], etc.)
# - Real values stored in metadata and automatically resolved for Odoo tool calls
# - Output checked for leaks and re-sanitized before sending to user
# Supported: email, phone, credit card, SSN (US), DNI (Argentina)

# LLM-based output guardrails (use gpt-4o-mini)
# Cost: ~$0.0002 per check | Latency: ~200-500ms each
GUARDRAILS_ENABLE_TONE_CHECK=true           # Professional tone validation
GUARDRAILS_ENABLE_RELEVANCE_CHECK=true      # Response relevance validation
GUARDRAILS_LLM_TIMEOUT=5000                 # Timeout for LLM guardrail calls (ms)

# Toxicity threshold (0-1, higher = more strict)
GUARDRAILS_TOXICITY_THRESHOLD=0.7

# OpenAI Moderation API Configuration
OPENAI_MODERATION_TIMEOUT=5000          # Timeout for moderation API calls (ms)
GUARDRAILS_MODERATION_FALLBACK=warn     # Behavior if API fails: warn|block
